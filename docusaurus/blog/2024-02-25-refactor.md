---
title: リファクタリング構想
date: 2024-02-25
tags: [cpp]
---

Windows で http get するところまでできた。
使用ライブラリーの構成が固まった。

<!-- truncate -->

## ✅ libuv でクロスプラットフォーム

platform を posix というより libuv にすることで、
Windows 兼用にできる。

ファイルアクセス, socket, keyboard, pty, signal, child process など、
かなりの部分を libuv 化できます。
term の rawmode 制御や curses 依存の除去ができて、Windows ビルドが大きく前進しました。

## ✅ c++20 coroutine

form input を co_await でモーダルダイアログ化できた。

## ✅ ftxui 端末描画

ftxui::Screen から escape sequence を出力する機能を使っている。
✅ ftxui::Elment から、 ftxui::Screen を出力する部分も使う予定。

## ✅ nkf で文字コード

 ライブラリは組み込んだが、まだ未使用。

## ✅ zlib で自前解凍

`/usr/bin/gzip` を fork して pipe 制御するより簡単。

fork を使わなくなって Windows 向けが簡単になった。

